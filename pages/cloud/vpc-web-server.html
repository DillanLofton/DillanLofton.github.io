<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Lab 2: Build your VPC & Launch a Web Server | Dillan Lofton</title>
<meta name="description" content="Create a VPC with public/private subnets, route tables, NAT/IGW, security group, and launch an EC2 web server.">
<style>
  body{margin:0;background:#0f1720;color:#e5e7eb;font-family:ui-sans-serif,system-ui,Segoe UI,Roboto}
  a{color:#ffb84d;text-decoration:none}
  header{position:sticky;top:0;background:#0f1720cc;backdrop-filter:blur(8px);padding:.8rem;border-bottom:1px solid #1f2937}
  .wrap{max-width:980px;margin:auto;padding:1.2rem}
  h1{margin:.4rem 0 0}
  h2{margin:1rem 0 .5rem;color:#ffcc80}
  .card{background:#0b1220;border:1px solid #1f2937;border-radius:14px;padding:1rem;margin-top:1rem}
  .pill{display:inline-block;border:1px solid #1f2937;border-radius:999px;padding:.2rem .5rem;margin-right:.4rem;color:#cbd5e1;font-size:.8rem}
  .row{display:grid;gap:1rem}
  @media(min-width:880px){.row{grid-template-columns:1fr 1fr}}
  details{border:1px solid #1f2937;border-radius:10px;padding:.6rem .8rem;background:#0a1120;margin-top:.6rem}
  summary{cursor:pointer;font-weight:600}
  
pre,code{
  background:#0a1120;
  border:1px solid #1f2937;
  border-radius:10px;
  padding:.3rem .45rem;
  overflow-wrap:break-word;
  word-wrap:break-word;
  white-space:pre-wrap;
  font-size:0.85rem;        /* makes code smaller */
  line-height:1.4;          /* adds breathing room */
}
  table{width:100%;border-collapse:collapse}
  th,td{border-bottom:1px solid #1f2937;padding:.45rem .4rem;text-align:left}
  .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:.6rem}
  img{width:100%;border-radius:10px;border:1px solid #1f2937}
  .btn{display:inline-block;background:linear-gradient(180deg,#ff9900,#f59e0b);color:#111;font-weight:700;padding:.45rem .7rem;border-radius:.55rem;margin-top:.6rem}
  .note{color:#9ca3af}
  footer{color:#9ca3af;text-align:center;margin:1.2rem 0 .4rem}
</style>
</head>
<body>
<header class="wrap"><a href="../cloud/index.html">← Back to Cloud Labs</a></header>
<main class="wrap">
  <h1>Lab 2: Build your VPC & Launch a Web Server</h1>
  <div class="pill">AWS • VPC</div> <div class="pill">EC2</div> <div class="pill">Networking</div>

  <div class="card">
    <h2>Lab Overview</h2>
    <p>Create a custom VPC and networking (IGW, NAT, public/private subnets, route tables), then configure a security group and launch an EC2 instance with user data to run a web server.</p>
    <p class="note">Duration: ~30 minutes • Region used: N. Virginia (us-east-1).</p>
  </div>

  <div class="row">
    <div class="card">
      <h2>Objectives</h2>
      <ul>
        <li>Create a VPC</li>
        <li>Create subnets (public & private) across AZs</li>
        <li>Configure a security group (HTTP)</li>
        <li>Launch an EC2 instance into the VPC and serve a web page</li>
      </ul>
    </div>
    <div class="card">
      <h2>Environment Notes</h2>
      <p>Lab accounts may restrict services not required by the instructions. “Not authorized” errors outside scope are expected.</p>
    </div>
  </div>

  <div class="card">
    <h2>Architecture (Result)</h2>
    <ul>
      <li><strong>VPC:</strong> <code>lab-vpc</code> (10.0.0.0/16)</li>
      <li><strong>Subnets (AZ a):</strong> Public <code>10.0.0.0/24</code>, Private <code>10.0.1.0/24</code></li>
      <li><strong>Subnets (AZ b):</strong> Public <code>10.0.2.0/24</code>, Private <code>10.0.3.0/24</code></li>
      <li><strong>Route Tables:</strong> <code>lab-rtb-public</code> (→ IGW), <code>lab-rtb-private1-us-east-1a</code> (→ NAT), associated to both private subnets</li>
      <li><strong>Gateways:</strong> Internet Gateway <code>lab-igw</code>; NAT Gateway <code>lab-nat-public1-us-east-1a</code></li>
      <li><strong>Security Group:</strong> “Web Security Group” (allow HTTP from Anywhere-IPv4)</li>
      <li><strong>EC2:</strong> t2.micro Amazon Linux 2023 in <code>lab-subnet-public2</code> with public IP</li>
    </ul>
    <div class="grid">
      <figure>
        <img src="../../assets/img/lab2-architecture.png" alt="VPC architecture diagram">
        <figcaption class="note">Upload to <code>/assets/img/lab2-architecture.png</code></figcaption>
      </figure>
    </div>
  </div>

  <div class="card">
    <h2>Business Context</h2>
    <p>Deploy a simple, resilient network foundation: public subnets for internet-facing resources, private subnets for internal-only resources with outbound access via NAT. Launch a small web server to verify connectivity and security.</p>
  </div>

  <div class="card">
    <h2>Detailed Steps</h2>

    <details open>
      <summary><strong>Task 1 — Create your VPC (VPC and more)</strong></summary>
      <ol>
        <li>Open <em>VPC</em> (region: <strong>us-east-1</strong>), choose <em>Create VPC</em> → <strong>VPC and more</strong>.</li>
        <li>Name tag auto-generation: keep <em>Auto-generate</em>, change value from <em>project</em> to <strong>lab</strong>.</li>
        <li>IPv4 CIDR: <code>10.0.0.0/16</code>; AZs: <strong>1</strong>; public subnets: <strong>1</strong>; private subnets: <strong>1</strong>.</li>
        <li>Customize subnet CIDRs:
          <ul>
            <li>Public (us-east-1a): <code>10.0.0.0/24</code></li>
            <li>Private (us-east-1a): <code>10.0.1.0/24</code></li>
          </ul>
        </li>
        <li>NAT Gateways: <strong>In 1 AZ</strong>; VPC endpoints: <strong>None</strong>; DNS hostnames + resolution: <strong>enabled</strong>.</li>
        <li>Preview confirms resources (IGW, NAT, subnets, route tables) → <strong>Create VPC</strong> → wait until complete → <strong>View VPC</strong>.</li>
      </ol>
      <p class="note">Public subnet is “public” because its route table sends <code>0.0.0.0/0</code> to the Internet Gateway. Private subnets route internet-bound traffic to the NAT Gateway.</p>
    </details>

    <details>
      <summary><strong>Task 2 — Create additional subnets (second AZ) & update associations</strong></summary>
      <ol>
        <li><em>Subnets</em> → <strong>Create subnet</strong> (VPC: <code>lab-vpc</code>): 
          <ul>
            <li><strong>lab-subnet-public2</strong> (AZ: us-east-1b, CIDR: <code>10.0.2.0/24</code>)</li>
            <li><strong>lab-subnet-private2</strong> (AZ: us-east-1b, CIDR: <code>10.0.3.0/24</code>)</li>
          </ul>
        </li>
        <li><em>Route tables</em> → select <code>lab-rtb-private1-us-east-1a</code> → <em>Subnet associations</em> → <strong>Edit</strong> → keep private1 + add <strong>lab-subnet-private2</strong> → Save.</li>
        <li>Select <code>lab-rtb-public</code> → <em>Subnet associations</em> → <strong>Edit</strong> → keep public1 + add <strong>lab-subnet-public2</strong> → Save.</li>
      </ol>
    </details>

    <details>
      <summary><strong>Task 3 — Create Security Group</strong></summary>
      <ol>
        <li><em>Security groups</em> → <strong>Create security group</strong></li>
        <li>Name: <strong>Web Security Group</strong> • Description: <em>Enable HTTP access</em> • VPC: <strong>lab-vpc</strong></li>
        <li>Inbound rule: Type <strong>HTTP</strong> • Source <strong>Anywhere-IPv4</strong> • Description: Permit web requests</li>
        <li><strong>Create security group</strong></li>
      </ol>
      <table>
        <thead><tr><th>Direction</th><th>Protocol/Port</th><th>Source</th><th>Description</th></tr></thead>
        <tbody>
          <tr><td>Inbound</td><td>TCP 80</td><td>0.0.0.0/0</td><td>Permit web requests</td></tr>
          <tr><td>Outbound</td><td>All</td><td>0.0.0.0/0</td><td>(default)</td></tr>
        </tbody>
      </table>
    </details>

    <details>
      <summary><strong>Task 4 — Launch EC2 into the VPC (web server)</strong></summary>
      <ol>
        <li><em>EC2</em> → <strong>Launch instance</strong> → Name: <strong>Web Server 1</strong></li>
        <li>AMI: <strong>Amazon Linux 2023</strong> • Type: <strong>t2.micro</strong> • Key pair: <strong>vockey</strong></li>
        <li><em>Network settings</em> (Edit):
          <ul>
            <li>VPC: <strong>lab-vpc</strong></li>
            <li>Subnet: <strong>lab-subnet-public2</strong> (not private)</li>
            <li>Auto-assign public IP: <strong>Enable</strong></li>
            <li>Security group: <strong>Web Security Group</strong></li>
          </ul>
        </li>
        <li>Storage: keep defaults.</li>
        <li><em>Advanced details</em> → <strong>User data</strong> (paste):</li>
      </ol>
<pre>#cloud-config
runcmd:
  - dnf install -y httpd wget php mariadb105-server unzip
  - wget https://aws-tc-largeobjects.s3.us-west-2.amazonaws.com/CUR-TF-100-ACCLFO-2/2-lab2-vpc/s3/lab-app.zip -O /tmp/lab-app.zip
  - unzip /tmp/lab-app.zip -d /var/www/html/
  - systemctl enable httpd
  - systemctl start httpd
</pre>
      <ol start="6">
        <li><strong>Launch instance</strong> → wait for <em>2/2 checks passed</em>.</li>
        <li>Select the instance → copy <strong>Public IPv4 DNS</strong> → open in a new browser tab → you should see the lab web page.</li>
      </ol>
    </details>
  </div>

  <div class="row">
    <div class="card">
      <h2>Screenshots</h2>
      <p class="note">Upload images to <code>/assets/img/</code> using these names (or update the paths below):</p>
      <div class="grid">
        <figure><img src="../../assets/img/lab2-vpc-created.png" alt="VPC created"><figcaption class="note">VPC created</figcaption></figure>
        <figure><img src="../../assets/img/lab2-subnets.png" alt="Subnets list"><figcaption class="note">Subnets: public/private in two AZs</figcaption></figure>
        <figure><img src="../../assets/img/lab2-rtb-public.png" alt="Public route table"><figcaption class="note">Public route table → IGW</figcaption></figure>
        <figure><img src="../../assets/img/lab2-rtb-private.png" alt="Private route table"><figcaption class="note">Private route table → NAT</figcaption></figure>
        <figure><img src="../../assets/img/lab2-sg-http.png" alt="SG HTTP"><figcaption class="note">Security group allowing HTTP</figcaption></figure>
        <figure><img src="../../assets/img/lab2-ec2-running.png" alt="EC2 running"><figcaption class="note">EC2 running (checks passed)</figcaption></figure>
        <figure><img src="../../assets/img/lab2-webpage.png" alt="Web page"><figcaption class="note">Web app reachable via Public DNS</figcaption></figure>
      </div>
    </div>

    <div class="card">
      <h2>Results & Reflection</h2>
      <ul>
        <li>Deployed a VPC with public/private subnets and correct routing to IGW/NAT.</li>
        <li>Secured EC2 with a minimal HTTP-only security group.</li>
        <li>Automated web server setup via user data.</li>
      </ul>
      <p class="note">Lesson: public vs private subnets are defined by <em>route table targets</em> (IGW vs NAT), not just CIDR names.</p>
      <a class="btn" href="../../assets/labs/VPC_Lab.pdf" target="_blank">PDF Summary (optional)</a>
    </div>
  </div>

  <div class="card">
    <h2>Common Pitfalls</h2>
    <ul>
      <li>Launching instance in a <em>private</em> subnet (no public IP) → can’t reach webpage.</li>
      <li>Forgetting to enable <em>Auto-assign public IP</em> or to attach the HTTP security group.</li>
      <li>Wrong region (resources seem “missing”).</li>
    </ul>
  </div>

  <footer>© <span id="yr"></span> Dillan Lofton • AWS VPC & EC2 Web Server</footer>
</main>
<script>document.getElementById('yr').textContent=new Date().getFullYear()</script>
</body>
</html>
